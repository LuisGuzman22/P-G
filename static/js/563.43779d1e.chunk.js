"use strict";(self.webpackChunkP_G=self.webpackChunkP_G||[]).push([[563],{75563:(e,a,r)=>{r.r(a),r.d(a,{default:()=>_});var s=r(65043),t=r(54101),n=r(6122),o=r(72717),i=r(13127),l=r(84709),c=r(25762),d=r(8270),m=r(56627),u=r(31148),h=r(54451),y=r(70579);var p=r(34974);var x=r(89756),f=r(31486),j=r(54823),b=r(42566),v=r(26460);var N=r(49957),g=r(17564),E=(r(87921),r(90761)),C=r(43357),R=r(84998),L=r(85930),k=r(44619),A=r(63171),S=r(81925),M=r(56732),w=r(73216),B=r(4398),T=r(11418),F=r(16323),D=r(81917),K=r(44101),P=r(44227),O=r(64231),z=r(85968);const W=e=>{const[a,r]=(0,s.useState)(""),[t,n]=(0,s.useState)(!1);return(0,y.jsxs)(B.z,{scrollable:!0,visible:e.visible,onClose:()=>e.sendDataToParent(!1),"aria-labelledby":"ScrollingLongContentExampleLabel2",size:"xl",className:"project-creation-modal",children:[(0,y.jsx)(T.E,{}),(0,y.jsx)(F.T,{children:(0,y.jsx)(D.q,{children:(0,y.jsx)(K.s,{children:(0,y.jsx)(P.U,{sm:12,children:(0,y.jsx)(O.I,{id:"rejectCommentary",label:"Comentario",value:a||"",rows:3,invalid:t,text:t&&"Debe agregar un comentario para rechazar el informe diario.",onChange:e=>{(e=>{r(e.target.value)})(e)}})})})})}),(0,y.jsxs)(z.I,{children:[(0,y.jsx)(l.Q,{color:"danger",onClick:()=>(n(!1),void(""!==a?e.sendDataToParent(!1):n(!0))),children:"Rechazar"}),(0,y.jsx)(l.Q,{color:"primary",onClick:()=>{e.sendDataToParent(!1)},children:"Aprobar"})]})]})};var q=r(50286),I=r(18308),U=r(49634),Q=r(27304),V=r(55316);const G=()=>{const e=(0,w.zy)().pathname.includes("/view"),a=((0,w.Zp)(),(0,s.useRef)(null)),r=(0,s.useRef)(null),[B,T]=(0,s.useState)(!1),{company:F,indirectWorkForceList:D,totalIndirectWorkForce:K,directWorkForceList:P,totalDirectWorkForce:O,asarcoMachineryList:z,machineryList:G,equipmentList:Y,equipmentPlateList:Z,vehicleList:$,vehiclePlateList:_,activityList:H,aljibeList:X,comment:J,incident:ee,directDotationWorkForceList:ae,machineryWorkForceList:re,equipmentWorkForceList:se,graphList:te}=(0,h.A)(),[ne,oe]=(0,s.useState)(),[ie,le]=(0,s.useState)(),[ce,de]=(0,s.useState)(!1),[me,ue]=(0,s.useState)(),[he,ye]=(0,s.useState)(),[pe,xe]=(0,s.useState)(0),[fe,je]=(0,s.useState)(0),[be,ve]=(0,s.useState)(!1);(0,s.useEffect)((()=>{O.directSubtotalOfferedNumber&&O.directSubtotalWorkNumber&&ve(!0),xe(O.directSubtotalOfferedNumber),je(O.directSubtotalWorkNumber)}),[O]);const[Ne,ge]=(0,s.useState)(0),[Ee,Ce]=(0,s.useState)(0),[Re,Le]=(0,s.useState)(0),[ke,Ae]=(0,s.useState)(0),[Se,Me]=(0,s.useState)(0),[we,Be]=(0,s.useState)(0),[Te,Fe]=(0,s.useState)(0),[De,Ke]=(0,s.useState)(0),[Pe,Oe]=(0,s.useState)(!1);(0,s.useEffect)((()=>{for(let e of z)Oe(!0),Ke(De+Number(e.asarcoMachineryEffectiveTime)+Number(e.asarcoMachineryScheduleMaintenance)+Number(e.asarcoMachineryScheduleDelay)+Number(e.asarcoMachineryOpperationalLoss)+Number(e.asarcoMachineryUnscheduleMaintenance)+Number(e.asarcoMachineryUnscheduleDelay)+Number(e.asarcoMachineryReserves)),ge(Ne+Number(e.asarcoMachineryEffectiveTime)),Ce(Ee+Number(e.asarcoMachineryScheduleMaintenance)),Le(Re+Number(e.asarcoMachineryScheduleDelay)),Ae(ke+Number(e.asarcoMachineryOpperationalLoss)),Me(Se+Number(e.asarcoMachineryUnscheduleMaintenance)),Be(we+Number(e.asarcoMachineryUnscheduleDelay)),Fe(Te+Number(e.asarcoMachineryReserves))}),[z]),(0,s.useEffect)((()=>{F.dailyReportDate||window.location.reload()}),[F]);const{getData:ze}=(0,U.A)(),We=ze("basics"),{registerData:qe}=(0,R.A)();return(0,y.jsxs)("div",{className:"dailyReport",children:[B&&(0,y.jsx)(W,{visible:!0,sendDataToParent:async e=>{T(e)}}),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{}),(0,y.jsx)(q.XP,{document:(0,y.jsx)(I.default,{company:F,indirectWorkForceList:D,basicQuery:We,totalIndirectWorkForce:K,directWorkForceList:P,totalDirectWorkForce:O,asarcoMachineryList:z,machineryList:G,equipmentList:Y,equipmentPlateList:Z,vehiclePlateList:_,vehicleList:$,activityList:H,aljibeList:X,comment:J,incident:ee,directDotationWorkForceList:ae,machineryWorkForceList:re,equipmentWorkForceList:se,imagenColumnChart:ne,imagenPieChart:ie,graphList:te}),fileName:"Reporte 1.pdf",children:e=>{let{blob:s,url:t,loading:n,error:o}=e;return de(n),ue(s),Pe&&(ie&&"data:,"!==ie||(le(),(0,V.$E)(r.current,{cacheBust:!1}).then((e=>{le(e)})).catch((e=>{})))),be&&(ne&&"data:,"!==ne||(oe(),(0,V.$E)(a.current,{cacheBust:!1}).then((e=>{oe(e)})).catch((e=>{})))),ye(t),n?"Generando documento...":"Descargar PDF"}})]}),!ce&&he&&me?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(t.E,{className:"dailyReport-accordion",activeItemKey:1,children:[(0,y.jsxs)(n.l,{itemKey:1,children:[(0,y.jsx)(o.B,{children:"1) Empresa"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(c.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:2,children:[(0,y.jsx)(o.B,{children:"2) Fuerza de trabajo personal indirecto"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(d.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:3,children:[(0,y.jsx)(o.B,{children:"3) Fuerza laboral total personal indirecto"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(m.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:4,children:[(0,y.jsx)(o.B,{children:"4) Fuerza laboral contratista personal directo"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(C.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:5,children:[(0,y.jsx)(o.B,{children:"5) Fuerza laboral total personal directo"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(u.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:6,children:[(0,y.jsx)(o.B,{children:"6) Dotaci\xf3n por frente de trabajo personal directo"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(p.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:7,children:[(0,y.jsx)(o.B,{children:"7) Maquinarias contratistas"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(x.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:8,children:[(0,y.jsx)(o.B,{children:"8) Maquinarias por frente de trabajo"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(f.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:9,children:[(0,y.jsx)(o.B,{children:"9) ASARCO Maquinarias"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(L.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:10,children:[(0,y.jsx)(o.B,{children:"10) Equipos contratistas"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(j.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:11,children:[(0,y.jsx)(o.B,{children:"11) Equipos con patentes contratistas"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(k.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:12,children:[(0,y.jsx)(o.B,{children:"12) Equipos por frente de trabajo"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(b.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:13,children:[(0,y.jsx)(o.B,{children:"13) Veh\xedculos menores contratistas"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(v.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:14,children:[(0,y.jsx)(o.B,{children:"14) Veh\xedculos con patente menores contratistas"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(A.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:15,children:[(0,y.jsx)(o.B,{children:"15) Descripci\xf3n de actividades desarrolladas"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(N.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:16,children:[(0,y.jsx)(o.B,{children:"16) Control de aguas industriales utilizadas"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(S.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:17,children:[(0,y.jsx)(o.B,{children:"17) Comentarios y alertas en general"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(g.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:18,children:[(0,y.jsx)(o.B,{children:"18) Registro fotogr\xe1fico diario"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(M.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:19,children:[(0,y.jsx)(o.B,{children:"19) Incidentes, lesiones o eventos"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(E.A,{})})]}),(0,y.jsxs)(n.l,{itemKey:20,children:[(0,y.jsx)(o.B,{children:"20) Firmas"}),(0,y.jsx)(i.i,{className:"dailyReport-accordion",children:(0,y.jsx)(y.Fragment,{})})]})]}),(0,y.jsx)(l.Q,{className:"btn-project-action",onClick:()=>{e?T(!B):qe()},children:"Registrar informe diario"})]}):(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(Q.A,{})})]})};var Y=r(80861),Z=r(96105),$=r(23682);const _=()=>{let e=(0,w.Zp)();const{getData:a}=(0,U.A)(),r=a("basics");return(0,s.useEffect)((()=>{r||e("/dashboard")}),[r]),(0,y.jsx)("div",{className:"daily-report",children:(0,y.jsx)(Y.E,{children:(0,y.jsx)(Z.W,{children:(0,y.jsx)($.d,{children:(0,y.jsx)(G,{})})})})})}},4398:(e,a,r)=>{r.d(a,{z:()=>p,m:()=>y});var s=r(22378),t=r(65043),n=r(65173),o=r.n(n),i=r(25196),l=r(46125),c=r(372),d=(0,t.forwardRef)((function(e,a){var r=e.children,n=e.className,o=(0,s.Tt)(e,["children","className"]);return t.createElement("div",(0,s.Cl)({className:(0,i.A)("modal-content",n)},o,{ref:a}),r)}));d.propTypes={children:o().node,className:o().string},d.displayName="CModalContent";var m=(0,t.forwardRef)((function(e,a){var r,n=e.children,o=e.alignment,l=e.className,c=e.fullscreen,d=e.scrollable,m=e.size,u=(0,s.Tt)(e,["children","alignment","className","fullscreen","scrollable","size"]);return t.createElement("div",(0,s.Cl)({className:(0,i.A)("modal-dialog",(r={"modal-dialog-centered":"center"===o},r["boolean"===typeof c?"modal-fullscreen":"modal-fullscreen-".concat(c,"-down")]=c,r["modal-dialog-scrollable"]=d,r["modal-".concat(m)]=m,r),l)},u,{ref:a}),n)}));m.propTypes={alignment:o().oneOf(["top","center"]),children:o().node,className:o().string,fullscreen:o().oneOfType([o().bool,o().oneOf(["sm","md","lg","xl","xxl"])]),scrollable:o().bool,size:o().oneOf(["sm","lg","xl"])},m.displayName="CModalDialog";var u=r(94462),h=r(80413),y=(0,t.createContext)({}),p=(0,t.forwardRef)((function(e,a){var r=e.children,n=e.alignment,o=e.backdrop,p=void 0===o||o,x=e.className,f=e.duration,j=void 0===f?150:f,b=e.focus,v=void 0===b||b,N=e.fullscreen,g=e.keyboard,E=void 0===g||g,C=e.onClose,R=e.onClosePrevented,L=e.onShow,k=e.portal,A=void 0===k||k,S=e.scrollable,M=e.size,w=e.transition,B=void 0===w||w,T=e.unmountOnClose,F=void 0===T||T,D=e.visible,K=(0,s.Tt)(e,["children","alignment","backdrop","className","duration","focus","fullscreen","keyboard","onClose","onClosePrevented","onShow","portal","scrollable","size","transition","unmountOnClose","visible"]),P=(0,t.useRef)(null),O=(0,t.useRef)(null),z=(0,t.useRef)(null),W=(0,u.E2)(a,O),q=(0,t.useState)(D),I=q[0],U=q[1],Q=(0,t.useState)(!1),V=Q[0],G=Q[1],Y={visible:I,setVisible:U};(0,t.useEffect)((function(){U(D)}),[D]),(0,t.useEffect)((function(){var e;return I?(P.current=document.activeElement,document.addEventListener("mouseup",$),document.addEventListener("keydown",_)):null===(e=P.current)||void 0===e||e.focus(),function(){document.removeEventListener("mouseup",$),document.removeEventListener("keydown",_)}}),[I]);var Z=function(){return"static"===p?G(!0):(U(!1),C&&C())};(0,t.useLayoutEffect)((function(){R&&R(),setTimeout((function(){return G(!1)}),j)}),[V]),(0,t.useLayoutEffect)((function(){return I?(document.body.classList.add("modal-open"),p&&(document.body.style.overflow="hidden",document.body.style.paddingRight="0px"),setTimeout((function(){var e;v&&(null===(e=O.current)||void 0===e||e.focus())}),B?j:0)):(document.body.classList.remove("modal-open"),p&&(document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"))),function(){document.body.classList.remove("modal-open"),p&&(document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"))}}),[I]);var $=function(e){O.current&&O.current==e.target&&Z()},_=function(e){"Escape"===e.key&&E&&Z()};return t.createElement(t.Fragment,null,t.createElement(h.Ay,{in:I,mountOnEnter:!0,nodeRef:O,onEnter:L,onExit:C,unmountOnExit:F,timeout:B?j:0},(function(e){return t.createElement(c.Y,{portal:A},t.createElement(y.Provider,{value:Y},t.createElement("div",(0,s.Cl)({className:(0,i.A)("modal",{"modal-static":V,fade:B,show:"entered"===e},x),tabIndex:-1},I?{"aria-modal":!0,role:"dialog"}:{"aria-hidden":"true"},{style:(0,s.Cl)({},"exited"!==e&&{display:"block"})},K,{ref:W}),t.createElement(m,{alignment:n,fullscreen:N,scrollable:S,size:M},t.createElement(d,{ref:z},r)))))})),p&&t.createElement(c.Y,{portal:A},t.createElement(l.W,{visible:I})))}));p.propTypes={alignment:o().oneOf(["top","center"]),backdrop:o().oneOfType([o().bool,o().oneOf(["static"])]),children:o().node,className:o().string,duration:o().number,focus:o().bool,fullscreen:o().oneOfType([o().bool,o().oneOf(["sm","md","lg","xl","xxl"])]),keyboard:o().bool,onClose:o().func,onClosePrevented:o().func,onShow:o().func,portal:o().bool,scrollable:o().bool,size:o().oneOf(["sm","lg","xl"]),transition:o().bool,unmountOnClose:o().bool,visible:o().bool},p.displayName="CModal"},16323:(e,a,r)=>{r.d(a,{T:()=>l});var s=r(22378),t=r(65043),n=r(65173),o=r.n(n),i=r(25196),l=(0,t.forwardRef)((function(e,a){var r=e.children,n=e.className,o=(0,s.Tt)(e,["children","className"]);return t.createElement("div",(0,s.Cl)({className:(0,i.A)("modal-body",n)},o,{ref:a}),r)}));l.propTypes={children:o().node,className:o().string},l.displayName="CModalBody"},85968:(e,a,r)=>{r.d(a,{I:()=>l});var s=r(22378),t=r(65043),n=r(65173),o=r.n(n),i=r(25196),l=(0,t.forwardRef)((function(e,a){var r=e.children,n=e.className,o=(0,s.Tt)(e,["children","className"]);return t.createElement("div",(0,s.Cl)({className:(0,i.A)("modal-footer",n)},o,{ref:a}),r)}));l.propTypes={children:o().node,className:o().string},l.displayName="CModalFooter"},11418:(e,a,r)=>{r.d(a,{E:()=>d});var s=r(22378),t=r(65043),n=r(65173),o=r.n(n),i=r(25196),l=(0,t.forwardRef)((function(e,a){var r=e.className,n=e.dark,o=e.disabled,l=e.white,c=(0,s.Tt)(e,["className","dark","disabled","white"]);return t.createElement("button",(0,s.Cl)({type:"button",className:(0,i.A)("btn","btn-close",{"btn-close-white":l},o,r),"aria-label":"Close",disabled:o},n&&{"data-coreui-theme":"dark"},c,{ref:a}))}));l.propTypes={className:o().string,dark:o().bool,disabled:o().bool,white:o().bool},l.displayName="CCloseButton";var c=r(4398),d=(0,t.forwardRef)((function(e,a){var r=e.children,n=e.className,o=e.closeButton,d=void 0===o||o,m=(0,s.Tt)(e,["children","className","closeButton"]),u=(0,t.useContext)(c.m).setVisible;return t.createElement("div",(0,s.Cl)({className:(0,i.A)("modal-header",n)},m,{ref:a}),r,d&&t.createElement(l,{onClick:function(){return u(!1)}}))}));d.propTypes={children:o().node,className:o().string,closeButton:o().bool},d.displayName="CModalHeader"}}]);
//# sourceMappingURL=563.43779d1e.chunk.js.map
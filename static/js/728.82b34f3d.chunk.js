"use strict";(self.webpackChunkP_G=self.webpackChunkP_G||[]).push([[728],{99349:(e,a,t)=>{t.d(a,{A:()=>f});t(65043);var n=t(4398),l=t(11418),r=t(89689),o=t(16323),s=t(81917),c=t(44101),i=t(44227),d=t(10825),m=t(85968),u=t(84709),p=t(70579);const f=e=>{const a=()=>{e.sendDataToParent(!1)};return(0,p.jsxs)(n.z,{scrollable:!0,visible:e.visible,onClose:()=>a(),"aria-labelledby":"ScrollingLongContentExampleLabel2",size:"xl",className:"project-creation-modal",children:[(0,p.jsx)(l.E,{children:(0,p.jsx)(r.l,{id:"ScrollingLongContentExampleLabel2",children:"A\xf1adir Contrato"})}),(0,p.jsx)(o.T,{children:(0,p.jsxs)(s.q,{children:[(0,p.jsxs)(c.s,{children:[(0,p.jsx)(i.U,{sm:6,children:(0,p.jsx)(d.O,{type:"text",id:"contractName",label:"Nombre",placeholder:"Nombre",text:"",onChange:e=>{}})}),(0,p.jsx)(i.U,{sm:6,children:(0,p.jsx)(d.O,{type:"text",id:"contractDetail",label:"Detalle",placeholder:"Detalle",text:""})})]}),(0,p.jsxs)(c.s,{children:[(0,p.jsx)(i.U,{sm:6,children:(0,p.jsx)(d.O,{type:"text",id:"contractUrl",label:"URL",placeholder:"URL",text:""})}),(0,p.jsxs)(i.U,{sm:6,children:[(0,p.jsx)(d.O,{type:"text",id:"contractPhone",label:"Tel\xe9fono",placeholder:"Tel\xe9fono",text:""})," "]})]}),(0,p.jsx)(c.s,{children:(0,p.jsx)(i.U,{sm:6,children:(0,p.jsx)(d.O,{type:"text",id:"contractMail",label:"Email",placeholder:"Email",text:""})})})]})}),(0,p.jsxs)(m.I,{children:[(0,p.jsx)(u.Q,{color:"secondary",onClick:()=>a(),children:"Cerrar"}),(0,p.jsx)(u.Q,{className:"btn-add",children:"A\xf1adir contrato"})]})]})}},36566:(e,a,t)=>{t.d(a,{MS:()=>s,OZ:()=>o,XU:()=>c,b:()=>r,ny:()=>i});var n=t(92535),l=t(77154);localStorage.getItem("USER_TYPE");const r=e=>(0,n.I)({queryKey:["projects"],refetchType:"all",refetchOnWindowFocus:!0,queryFn:async()=>(async e=>(await l.A.get("https://pyg-production.up.railway.app/api/v1/projects",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})).data.data)()}),o=e=>(0,n.I)({queryKey:["contracts"],refetchType:"all",queryFn:async()=>(async e=>(await l.A.get("https://2b3570b8072a44e09ce5b5a80a4c8012.api.mockbin.io/")).data.data)()}),s=e=>(0,n.I)({queryKey:["basics"],staleTime:0,gcTime:2147483647,refetchType:"all",queryFn:async()=>(async e=>(await l.A.get("https://mpm.pgproject.cl/api/v1/basicData",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})).data.data)()}),c=()=>(0,n.I)({queryKey:["users"],refetchType:"all",queryFn:async()=>(async()=>(await l.A.get("https://b4b07e25f42d4135b6fc3791a6e1d1f8.api.mockbin.io/")).data.data)()}),i=()=>(0,n.I)({queryKey:["reports"],staleTime:0,gcTime:2147483647,refetchType:"all",queryFn:async()=>(async()=>(await l.A.get("https://pyg-production.up.railway.app/api/v1/reports",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})).data.data)()})},52347:(e,a,t)=>{t.r(a),t.d(a,{default:()=>N});var n=t(65043),l=t(73216),r=t(44227),o=t(80861),s=t(64907),c=t(96105),i=t(23682),d=t(44101),m=t(30529),u=t(3526),p=t(35761),f=t(6145),h=t(36566);const y=e=>{const{data:a,isLoading:t,error:n}=(0,h.OZ)(e);return{data:a,isLoading:t,error:n}};var v=t(49634),b=t(99349),g=t(70579);const N=()=>{const e=(0,l.Zp)(),{getProject:a,saveContract:t}=(0,p.A)(),[h,N]=(0,n.useState)(),{getData:x}=(0,v.A)(),j=x("projects"),T=localStorage.getItem("USER_TYPE"),{data:C}=y(1),E=JSON.parse(a()),[w,A]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if("admin"!==T)if(E&&j){const e=j.find((e=>e.id===E.id));N(e.contracts)}else e("/project_selector")}),[j,E]),(0,n.useEffect)((()=>{"admin"===T&&(null===C||void 0===C?void 0:C.contract)&&N(C.contract)}),[C]),(0,g.jsxs)(g.Fragment,{children:[w&&(0,g.jsx)(b.A,{visible:!0,sendDataToParent:e=>{A(e)}}),(0,g.jsx)(r.U,{sm:6,className:"contract-selector-container",children:(0,g.jsxs)(o.E,{children:[(0,g.jsx)(s.Q,{children:(0,g.jsx)("h3",{children:"Seleccion de Contrato"})}),(0,g.jsx)(c.W,{children:(0,g.jsxs)(i.d,{children:[void 0===h&&(0,g.jsx)("h3",{children:"No se encontraron contratos asociados"}),h&&(null===h||void 0===h?void 0:h.map(((a,n)=>(0,g.jsx)(d.s,{children:(0,g.jsx)(r.U,{children:(0,g.jsx)(m.$,{onClick:()=>{(a=>{if("admin"!==T){const n={name:a.name,id:a.id,code:a.code};t(n),e("/dashboard")}else{const n={name:a.name,id:a.id,code:a.code};t(n),e("/project_selector")}})(a)},className:"mb-3",icon:(0,g.jsx)(f.A,{className:"my-4 text-white",icon:"https://pgproject.cl/uploads/1705996608_a41c61e65ecf2a35c699.jpg",height:52}),chart:(0,g.jsx)(u.T,{className:"project-selector-container",children:(0,g.jsx)(d.s,{children:(0,g.jsx)("span",{className:"project-title",children:a.name})})}),style:{"--cui-card-cap-bg":"#1A4D55",cursor:"pointer"},values:[{title:"Trisemanales",value:a.trisemanal},{title:"Avance",value:a.progress}]})})},n)))),(0,g.jsx)(d.s,{children:(0,g.jsx)(r.U,{children:(0,g.jsx)(m.$,{onClick:()=>{A(!w)},className:"mb-3",icon:(0,g.jsx)(f.A,{className:"my-4 text-white",icon:"https://pgproject.cl/uploads/1705996608_a41c61e65ecf2a35c699.jpg",height:52}),chart:(0,g.jsx)(u.T,{className:"project-selector-container",children:(0,g.jsx)(d.s,{children:(0,g.jsx)("span",{className:"project-title",children:"Crear nuevo contrato"})})}),style:{"--cui-card-cap-bg":"#1A4D55",cursor:"pointer"}})})},0)]})})]})})]})}},25104:(e,a,t)=>{t.d(a,{V:()=>c});var n=t(22378),l=t(65043),r=t(65173),o=t.n(r),s=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.as,o=void 0===r?"div":r,c=e.className,i=(0,n.Tt)(e,["children","as","className"]);return l.createElement(o,(0,n.Cl)({className:(0,s.A)("card-header",c)},i,{ref:a}),t)}));c.propTypes={as:o().elementType,children:o().node,className:o().string},c.displayName="CCardHeader"},23682:(e,a,t)=>{t.d(a,{d:()=>c});var n=t(22378),l=t(65043),r=t(65173),o=t.n(r),s=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.as,o=void 0===r?"p":r,c=e.className,i=(0,n.Tt)(e,["children","as","className"]);return l.createElement(o,(0,n.Cl)({className:(0,s.A)("card-text",c)},i,{ref:a}),t)}));c.propTypes={as:o().elementType,children:o().node,className:o().string},c.displayName="CCardText"},64907:(e,a,t)=>{t.d(a,{Q:()=>c});var n=t(22378),l=t(65043),r=t(65173),o=t.n(r),s=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.as,o=void 0===r?"h5":r,c=e.className,i=(0,n.Tt)(e,["children","as","className"]);return l.createElement(o,(0,n.Cl)({className:(0,s.A)("card-title",c)},i,{ref:a}),t)}));c.propTypes={as:o().elementType,children:o().node,className:o().string},c.displayName="CCardTitle"},4398:(e,a,t)=>{t.d(a,{z:()=>h,m:()=>f});var n=t(22378),l=t(65043),r=t(65173),o=t.n(r),s=t(25196),c=t(46125),i=t(372),d=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.className,o=(0,n.Tt)(e,["children","className"]);return l.createElement("div",(0,n.Cl)({className:(0,s.A)("modal-content",r)},o,{ref:a}),t)}));d.propTypes={children:o().node,className:o().string},d.displayName="CModalContent";var m=(0,l.forwardRef)((function(e,a){var t,r=e.children,o=e.alignment,c=e.className,i=e.fullscreen,d=e.scrollable,m=e.size,u=(0,n.Tt)(e,["children","alignment","className","fullscreen","scrollable","size"]);return l.createElement("div",(0,n.Cl)({className:(0,s.A)("modal-dialog",(t={"modal-dialog-centered":"center"===o},t["boolean"===typeof i?"modal-fullscreen":"modal-fullscreen-".concat(i,"-down")]=i,t["modal-dialog-scrollable"]=d,t["modal-".concat(m)]=m,t),c)},u,{ref:a}),r)}));m.propTypes={alignment:o().oneOf(["top","center"]),children:o().node,className:o().string,fullscreen:o().oneOfType([o().bool,o().oneOf(["sm","md","lg","xl","xxl"])]),scrollable:o().bool,size:o().oneOf(["sm","lg","xl"])},m.displayName="CModalDialog";var u=t(94462),p=t(80413),f=(0,l.createContext)({}),h=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.alignment,o=e.backdrop,h=void 0===o||o,y=e.className,v=e.duration,b=void 0===v?150:v,g=e.focus,N=void 0===g||g,x=e.fullscreen,j=e.keyboard,T=void 0===j||j,C=e.onClose,E=e.onClosePrevented,w=e.onShow,A=e.portal,k=void 0===A||A,O=e.scrollable,R=e.size,S=e.transition,L=void 0===S||S,P=e.unmountOnClose,U=void 0===P||P,z=e.visible,I=(0,n.Tt)(e,["children","alignment","backdrop","className","duration","focus","fullscreen","keyboard","onClose","onClosePrevented","onShow","portal","scrollable","size","transition","unmountOnClose","visible"]),q=(0,l.useRef)(null),D=(0,l.useRef)(null),F=(0,l.useRef)(null),M=(0,u.E2)(a,D),B=(0,l.useState)(z),_=B[0],K=B[1],W=(0,l.useState)(!1),Q=W[0],V=W[1],Y={visible:_,setVisible:K};(0,l.useEffect)((function(){K(z)}),[z]),(0,l.useEffect)((function(){var e;return _?(q.current=document.activeElement,document.addEventListener("mouseup",$),document.addEventListener("keydown",G)):null===(e=q.current)||void 0===e||e.focus(),function(){document.removeEventListener("mouseup",$),document.removeEventListener("keydown",G)}}),[_]);var Z=function(){return"static"===h?V(!0):(K(!1),C&&C())};(0,l.useLayoutEffect)((function(){E&&E(),setTimeout((function(){return V(!1)}),b)}),[Q]),(0,l.useLayoutEffect)((function(){return _?(document.body.classList.add("modal-open"),h&&(document.body.style.overflow="hidden",document.body.style.paddingRight="0px"),setTimeout((function(){var e;N&&(null===(e=D.current)||void 0===e||e.focus())}),L?b:0)):(document.body.classList.remove("modal-open"),h&&(document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"))),function(){document.body.classList.remove("modal-open"),h&&(document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"))}}),[_]);var $=function(e){D.current&&D.current==e.target&&Z()},G=function(e){"Escape"===e.key&&T&&Z()};return l.createElement(l.Fragment,null,l.createElement(p.Ay,{in:_,mountOnEnter:!0,nodeRef:D,onEnter:w,onExit:C,unmountOnExit:U,timeout:L?b:0},(function(e){return l.createElement(i.Y,{portal:k},l.createElement(f.Provider,{value:Y},l.createElement("div",(0,n.Cl)({className:(0,s.A)("modal",{"modal-static":Q,fade:L,show:"entered"===e},y),tabIndex:-1},_?{"aria-modal":!0,role:"dialog"}:{"aria-hidden":"true"},{style:(0,n.Cl)({},"exited"!==e&&{display:"block"})},I,{ref:M}),l.createElement(m,{alignment:r,fullscreen:x,scrollable:O,size:R},l.createElement(d,{ref:F},t)))))})),h&&l.createElement(i.Y,{portal:k},l.createElement(c.W,{visible:_})))}));h.propTypes={alignment:o().oneOf(["top","center"]),backdrop:o().oneOfType([o().bool,o().oneOf(["static"])]),children:o().node,className:o().string,duration:o().number,focus:o().bool,fullscreen:o().oneOfType([o().bool,o().oneOf(["sm","md","lg","xl","xxl"])]),keyboard:o().bool,onClose:o().func,onClosePrevented:o().func,onShow:o().func,portal:o().bool,scrollable:o().bool,size:o().oneOf(["sm","lg","xl"]),transition:o().bool,unmountOnClose:o().bool,visible:o().bool},h.displayName="CModal"},16323:(e,a,t)=>{t.d(a,{T:()=>c});var n=t(22378),l=t(65043),r=t(65173),o=t.n(r),s=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.className,o=(0,n.Tt)(e,["children","className"]);return l.createElement("div",(0,n.Cl)({className:(0,s.A)("modal-body",r)},o,{ref:a}),t)}));c.propTypes={children:o().node,className:o().string},c.displayName="CModalBody"},85968:(e,a,t)=>{t.d(a,{I:()=>c});var n=t(22378),l=t(65043),r=t(65173),o=t.n(r),s=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.className,o=(0,n.Tt)(e,["children","className"]);return l.createElement("div",(0,n.Cl)({className:(0,s.A)("modal-footer",r)},o,{ref:a}),t)}));c.propTypes={children:o().node,className:o().string},c.displayName="CModalFooter"},11418:(e,a,t)=>{t.d(a,{E:()=>d});var n=t(22378),l=t(65043),r=t(65173),o=t.n(r),s=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.className,r=e.dark,o=e.disabled,c=e.white,i=(0,n.Tt)(e,["className","dark","disabled","white"]);return l.createElement("button",(0,n.Cl)({type:"button",className:(0,s.A)("btn","btn-close",{"btn-close-white":c},o,t),"aria-label":"Close",disabled:o},r&&{"data-coreui-theme":"dark"},i,{ref:a}))}));c.propTypes={className:o().string,dark:o().bool,disabled:o().bool,white:o().bool},c.displayName="CCloseButton";var i=t(4398),d=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.className,o=e.closeButton,d=void 0===o||o,m=(0,n.Tt)(e,["children","className","closeButton"]),u=(0,l.useContext)(i.m).setVisible;return l.createElement("div",(0,n.Cl)({className:(0,s.A)("modal-header",r)},m,{ref:a}),t,d&&l.createElement(c,{onClick:function(){return u(!1)}}))}));d.propTypes={children:o().node,className:o().string,closeButton:o().bool},d.displayName="CModalHeader"},89689:(e,a,t)=>{t.d(a,{l:()=>c});var n=t(22378),l=t(65043),r=t(65173),o=t.n(r),s=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.as,o=void 0===r?"h5":r,c=e.className,i=(0,n.Tt)(e,["children","as","className"]);return l.createElement(o,(0,n.Cl)({className:(0,s.A)("modal-title",c)},i,{ref:a}),t)}));c.propTypes={as:o().elementType,children:o().node,className:o().string},c.displayName="CModalTitle"},30529:(e,a,t)=>{t.d(a,{$:()=>p});var n=t(22378),l=t(65043),r=t(65173),o=t.n(r),s=t(25196),c=t(80861),i=t(96105),d=t(25104),m=t(44227),u=t(75232),p=(0,l.forwardRef)((function(e,a){var t,r=e.className,o=e.chart,u=e.color,p=e.icon,f=e.values,h=(0,n.Tt)(e,["className","chart","color","icon","values"]);return l.createElement(c.E,(0,n.Cl)({className:r},h,{ref:a}),l.createElement(d.V,{className:(0,s.A)("position-relative d-flex justify-content-center align-items-center",(t={},t["bg-".concat(u)]=u,t))},p,o),l.createElement(i.W,{className:"row text-center"},f&&f.map((function(e,a){return l.createElement(l.Fragment,{key:a},a%2!==0&&l.createElement("div",{className:"vr"}),l.createElement(m.U,null,l.createElement("div",{className:"fs-5 fw-semibold"},e.value),l.createElement("div",{className:"text-uppercase text-body-secondary small"},e.title)))}))))}));p.propTypes={chart:o().oneOfType([o().string,o().node]),className:o().string,color:u.TX,icon:o().oneOfType([o().string,o().node]),values:o().arrayOf(o().any)},p.displayName="CWidgetStatsD"}}]);
//# sourceMappingURL=728.82b34f3d.chunk.js.map
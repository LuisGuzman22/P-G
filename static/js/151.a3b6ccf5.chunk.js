"use strict";(self.webpackChunkP_G=self.webpackChunkP_G||[]).push([[151],{73532:(e,a,r)=>{r.r(a),r.d(a,{default:()=>X});var i=r(65043),s=r(44101),c=r(54101),t=r(6122),n=r(72717),o=r(13127),l=r(84709),d=r(25762),h=r(8270),j=r(56627),x=r(31148),m=r(54451),u=r(70579);var y=r(34974);var p=r(89756),b=r(31486),N=r(54823),v=r(42566),f=r(26460);var R=r(49957),D=r(17564),L=(r(87921),r(90761)),g=r(43357),A=r(84998),S=r(85930),M=r(44619),k=r(63171),F=r(81925),B=r(56732),K=r(73216),P=r(4398),C=r(11418),E=r(16323),W=r(81917),q=r(44227),T=r(64231),z=r(85968);const H=e=>{const[a,r]=(0,i.useState)(""),[c,t]=(0,i.useState)(!1);return(0,u.jsxs)(P.z,{scrollable:!0,visible:e.visible,onClose:()=>e.sendDataToParent(!1),"aria-labelledby":"ScrollingLongContentExampleLabel2",size:"xl",className:"project-creation-modal",children:[(0,u.jsx)(C.E,{}),(0,u.jsx)(E.T,{children:(0,u.jsx)(W.q,{children:(0,u.jsx)(s.s,{children:(0,u.jsx)(q.U,{sm:12,children:(0,u.jsx)(T.I,{id:"rejectCommentary",label:"Comentario",value:a||"",rows:3,invalid:c,text:c&&"Debe agregar un comentario para rechazar el informe diario.",onChange:e=>{(e=>{r(e.target.value)})(e)}})})})})}),(0,u.jsxs)(z.I,{children:[(0,u.jsx)(l.Q,{color:"danger",onClick:()=>(t(!1),void(""!==a?e.sendDataToParent(!1):t(!0))),children:"Rechazar"}),(0,u.jsx)(l.Q,{color:"primary",onClick:()=>{e.sendDataToParent(!1)},children:"Aprobar"})]})]})};var w=r(50286),I=r(18308),O=r(49634),U=r(27304),Q=r(18767),G=r(55316);const V=()=>{const e=(0,K.zy)().pathname.includes("/edit"),a=((0,K.Zp)(),(0,i.useRef)(null)),r=(0,i.useRef)(null),[P,C]=(0,i.useState)(!1),{company:E,indirectWorkForceList:W,totalIndirectWorkForce:q,directWorkForceList:T,totalDirectWorkForce:z,asarcoMachineryList:V,machineryList:Z,equipmentList:$,equipmentPlateList:_,vehicleList:X,vehiclePlateList:J,activityList:Y,aljibeList:ee,comment:ae,incident:re,directDotationWorkForceList:ie,machineryWorkForceList:se,equipmentWorkForceList:ce}=(0,m.A)(),[te,ne]=(0,i.useState)(),[oe,le]=(0,i.useState)(),[de,he]=(0,i.useState)(!1),[je,xe]=(0,i.useState)(),[me,ue]=(0,i.useState)(),[ye,pe]=(0,i.useState)(0),[be,Ne]=(0,i.useState)(0);(0,i.useEffect)((()=>{pe(z.directSubtotalOfferedNumber),Ne(z.directSubtotalWorkNumber)}),[z]);const[ve,fe]=(0,i.useState)(0),[Re,De]=(0,i.useState)(0),[Le,ge]=(0,i.useState)(0),[Ae,Se]=(0,i.useState)(0),[Me,ke]=(0,i.useState)(0),[Fe,Be]=(0,i.useState)(0),[Ke,Pe]=(0,i.useState)(0),[Ce,Ee]=(0,i.useState)(0);(0,i.useEffect)((()=>{for(let e of V)Ee(Ce+Number(e.asarcoMachineryEffectiveTime)+Number(e.asarcoMachineryScheduleMaintenance)+Number(e.asarcoMachineryScheduleDelay)+Number(e.asarcoMachineryOpperationalLoss)+Number(e.asarcoMachineryUnscheduleMaintenance)+Number(e.asarcoMachineryUnscheduleDelay)+Number(e.asarcoMachineryReserves)),fe(ve+Number(e.asarcoMachineryEffectiveTime)),De(Re+Number(e.asarcoMachineryScheduleMaintenance)),ge(Le+Number(e.asarcoMachineryScheduleDelay)),Se(Ae+Number(e.asarcoMachineryOpperationalLoss)),ke(Me+Number(e.asarcoMachineryUnscheduleMaintenance)),Be(Fe+Number(e.asarcoMachineryUnscheduleDelay)),Pe(Ke+Number(e.asarcoMachineryReserves))}),[V]),(0,i.useEffect)((()=>{E.dailyReportDate||window.location.reload()}),[E]);const{getData:We}=(0,O.A)(),qe=We("basics"),{registerData:Te}=(0,A.A)(),ze=[["Dotaci\xf3n","Dotaci\xf3n",{role:"style"}],["Dotaci\xf3n Planeada Directos Total",ye,"#b87333"],["Dotaci\xf3n Directos Obra Total",be,"silver"]],He=[["Task","Hours per Day"],["Tiempo Efectivo (Hrs)",ve],["Mantenci\xf3n Programada (Hrs)",Re],["Demora Programada (Hrs)",Le],["Perdida Operacional (Hrs)",Ae],["Mantenci\xf3n No Programada (Hrs)",Me],["Demora No Programada (Hrs)",Fe],["Reservas (Hrs)",Ke]];return(0,u.jsxs)("div",{className:"dailyReport",children:[P&&(0,u.jsx)(H,{visible:!0,sendDataToParent:async e=>{C(e)}}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{children:(0,u.jsxs)(s.s,{children:[(0,u.jsx)("div",{ref:a,children:(0,u.jsx)(Q.t1,{chartType:"ColumnChart",width:"100%",height:"200px",data:ze})}),(0,u.jsx)("div",{ref:r,children:(0,u.jsx)(Q.t1,{chartType:"PieChart",data:He,width:"100%",height:"300px"})})]})}),(0,u.jsx)(w.XP,{document:(0,u.jsx)(I.default,{company:E,indirectWorkForceList:W,basicQuery:qe,totalIndirectWorkForce:q,directWorkForceList:T,totalDirectWorkForce:z,asarcoMachineryList:V,machineryList:Z,equipmentList:$,equipmentPlateList:_,vehiclePlateList:J,vehicleList:X,activityList:Y,aljibeList:ee,comment:ae,incident:re,directDotationWorkForceList:ie,machineryWorkForceList:se,equipmentWorkForceList:ce,imagenColumnChart:te,imagenPieChart:oe}),fileName:"Reporte 1.pdf",children:e=>{let{blob:i,url:s,loading:c,error:t}=e;return he(c),xe(i),te&&"data:,"!==te&&oe&&"data:,"!==oe||(ne(),le(),(0,G.$E)(a.current,{cacheBust:!1}).then((e=>{ne(e)})).catch((e=>{})),(0,G.$E)(r.current,{cacheBust:!1}).then((e=>{le(e)})).catch((e=>{}))),ue(s),c?"Generando documento...":"Descargar PDF"}})]}),!de&&me&&je?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(c.E,{className:"dailyReport-accordion",activeItemKey:1,children:[(0,u.jsxs)(t.l,{itemKey:1,children:[(0,u.jsx)(n.B,{children:"1) Empresa"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(d.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:2,children:[(0,u.jsx)(n.B,{children:"2) Fuerza de trabajo personal indirecto"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(h.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:3,children:[(0,u.jsx)(n.B,{children:"3) Fuerza laboral total personal indirecto"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(j.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:4,children:[(0,u.jsx)(n.B,{children:"4) Fuerza laboral contratista personal directo"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(g.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:5,children:[(0,u.jsx)(n.B,{children:"5) Fuerza laboral total personal directo"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(x.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:6,children:[(0,u.jsx)(n.B,{children:"6) Dotaci\xf3n por frente de trabajo personal directo"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(y.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:7,children:[(0,u.jsx)(n.B,{children:"7) Maquinarias contratistas"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(p.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:8,children:[(0,u.jsx)(n.B,{children:"8) Maquinarias por frente de trabajo"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(b.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:9,children:[(0,u.jsx)(n.B,{children:"9) ASARCO Maquinarias"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(S.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:10,children:[(0,u.jsx)(n.B,{children:"10) Equipos contratistas"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(N.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:11,children:[(0,u.jsx)(n.B,{children:"11) Equipos con patentes contratistas"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(M.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:12,children:[(0,u.jsx)(n.B,{children:"12) Equipos por frente de trabajo"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(v.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:13,children:[(0,u.jsx)(n.B,{children:"13) Veh\xedculos menores contratistas"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(f.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:14,children:[(0,u.jsx)(n.B,{children:"14) Veh\xedculos con patente menores contratistas"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(k.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:15,children:[(0,u.jsx)(n.B,{children:"15) Descripci\xf3n de actividades desarrolladas"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(R.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:16,children:[(0,u.jsx)(n.B,{children:"16) Control de aguas industriales utilizadas"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(F.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:17,children:[(0,u.jsx)(n.B,{children:"17) Comentarios y alertas en general"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(D.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:19,children:[(0,u.jsx)(n.B,{children:"19) Registro fotogr\xe1fico diario"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(B.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:21,children:[(0,u.jsx)(n.B,{children:"21) Incidentes, lesiones o eventos"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(L.A,{})})]}),(0,u.jsxs)(t.l,{itemKey:22,children:[(0,u.jsx)(n.B,{children:"22) Firmas"}),(0,u.jsx)(o.i,{className:"dailyReport-accordion",children:(0,u.jsx)(u.Fragment,{})})]})]}),(0,u.jsx)(l.Q,{className:"btn-project-action",onClick:()=>{e?C(!P):Te()},children:"Registrar informe diario"})]}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(U.A,{})})]})};var Z=r(80861),$=r(96105),_=r(23682);const X=()=>{let e=(0,K.Zp)();const{getData:a}=(0,O.A)(),r=a("basics");return(0,i.useEffect)((()=>{r||e("/dashboard")}),[r]),(0,u.jsx)("div",{className:"daily-report",children:(0,u.jsx)(Z.E,{children:(0,u.jsx)($.W,{children:(0,u.jsx)(_.d,{children:(0,u.jsx)(V,{})})})})})}}}]);
//# sourceMappingURL=151.a3b6ccf5.chunk.js.map
"use strict";(self.webpackChunkP_G=self.webpackChunkP_G||[]).push([[728],{99349:(e,a,t)=>{t.d(a,{A:()=>f});t(65043);var n=t(4398),l=t(11418),r=t(89689),s=t(16323),o=t(81917),c=t(44101),i=t(44227),d=t(10825),m=t(85968),u=t(84709),p=t(70579);const f=e=>{const a=()=>{e.sendDataToParent(!1)};return(0,p.jsxs)(n.z,{scrollable:!0,visible:e.visible,onClose:()=>a(),"aria-labelledby":"ScrollingLongContentExampleLabel2",size:"xl",className:"project-creation-modal",children:[(0,p.jsx)(l.E,{children:(0,p.jsx)(r.l,{id:"ScrollingLongContentExampleLabel2",children:"A\xf1adir Contrato"})}),(0,p.jsx)(s.T,{children:(0,p.jsxs)(o.q,{children:[(0,p.jsxs)(c.s,{children:[(0,p.jsx)(i.U,{sm:6,children:(0,p.jsx)(d.O,{type:"text",id:"contractName",label:"Nombre",placeholder:"Nombre",text:"",onChange:e=>{}})}),(0,p.jsx)(i.U,{sm:6,children:(0,p.jsx)(d.O,{type:"text",id:"contractDetail",label:"Detalle",placeholder:"Detalle",text:""})})]}),(0,p.jsxs)(c.s,{children:[(0,p.jsx)(i.U,{sm:6,children:(0,p.jsx)(d.O,{type:"text",id:"contractUrl",label:"URL",placeholder:"URL",text:""})}),(0,p.jsxs)(i.U,{sm:6,children:[(0,p.jsx)(d.O,{type:"text",id:"contractPhone",label:"Tel\xe9fono",placeholder:"Tel\xe9fono",text:""})," "]})]}),(0,p.jsx)(c.s,{children:(0,p.jsx)(i.U,{sm:6,children:(0,p.jsx)(d.O,{type:"text",id:"contractMail",label:"Email",placeholder:"Email",text:""})})})]})}),(0,p.jsxs)(m.I,{children:[(0,p.jsx)(u.Q,{color:"secondary",onClick:()=>a(),children:"Cerrar"}),(0,p.jsx)(u.Q,{className:"btn-add",children:"A\xf1adir contrato"})]})]})}},36566:(e,a,t)=>{t.d(a,{MS:()=>o,OZ:()=>s,XU:()=>c,b:()=>r,ny:()=>i});var n=t(92535),l=t(77154);localStorage.getItem("USER_TYPE");const r=e=>(0,n.I)({queryKey:["projects"],refetchType:"all",refetchOnWindowFocus:!0,queryFn:async()=>(async e=>(await l.A.get("https://pyg-production.up.railway.app/api/v1/projects")).data.data)()}),s=e=>(0,n.I)({queryKey:["contracts"],refetchType:"all",queryFn:async()=>(async e=>(await l.A.get("https://2b3570b8072a44e09ce5b5a80a4c8012.api.mockbin.io/")).data.data)()}),o=e=>(0,n.I)({queryKey:["basics"],staleTime:0,gcTime:2147483647,refetchType:"all",queryFn:async()=>(async e=>(await l.A.get("https://pyg-production.up.railway.app/api/v1/basicData")).data.data)()}),c=()=>(0,n.I)({queryKey:["users"],refetchType:"all",queryFn:async()=>(async()=>(await l.A.get("https://b4b07e25f42d4135b6fc3791a6e1d1f8.api.mockbin.io/")).data.data)()}),i=()=>(0,n.I)({queryKey:["reports"],staleTime:0,gcTime:2147483647,refetchType:"all",queryFn:async()=>(async()=>(await l.A.get("https://pyg-production.up.railway.app/api/v1/reports")).data.data)()})},52347:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var n=t(65043),l=t(73216),r=t(44227),s=t(80861),o=t(64907),c=t(96105),i=t(23682),d=t(44101),m=t(30529),u=t(3526),p=t(35761),f=t(6145),y=t(36566);const h=e=>{const{data:a,isLoading:t,error:n}=(0,y.OZ)(e);return{data:a,isLoading:t,error:n}};var v=t(49634),b=t(99349),N=t(70579);const x=()=>{const e=(0,l.Zp)(),{getProject:a,saveContract:t}=(0,p.A)(),[y,x]=(0,n.useState)(),{getData:g}=(0,v.A)(),j=g("projects"),T=localStorage.getItem("USER_TYPE"),{data:C}=h(1),E=JSON.parse(a()),[w,A]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if("admin"!==T)if(E&&j){const e=j.find((e=>e.id===E.id));x(e.contracts)}else e("/project_selector")}),[j,E]),(0,n.useEffect)((()=>{"admin"===T&&(null===C||void 0===C?void 0:C.contract)&&x(C.contract)}),[C]),(0,N.jsxs)(N.Fragment,{children:[w&&(0,N.jsx)(b.A,{visible:!0,sendDataToParent:e=>{A(e)}}),(0,N.jsx)(r.U,{sm:6,className:"contract-selector-container",children:(0,N.jsxs)(s.E,{children:[(0,N.jsx)(o.Q,{children:(0,N.jsx)("h3",{children:"Seleccion de Contrato"})}),(0,N.jsx)(c.W,{children:(0,N.jsxs)(i.d,{children:[void 0===y&&(0,N.jsx)("h3",{children:"No se encontraron contratos asociados"}),y&&(null===y||void 0===y?void 0:y.map(((a,n)=>(0,N.jsx)(d.s,{children:(0,N.jsx)(r.U,{children:(0,N.jsx)(m.$,{onClick:()=>{(a=>{if("admin"!==T){const n={name:a.name,id:a.id,code:a.code};t(n),e("/dashboard")}else{const n={name:a.name,id:a.id,code:a.code};t(n),e("/project_selector")}})(a)},className:"mb-3",icon:(0,N.jsx)(f.A,{className:"my-4 text-white",icon:"https://pgproject.cl/uploads/1705996608_a41c61e65ecf2a35c699.jpg",height:52}),chart:(0,N.jsx)(u.T,{className:"project-selector-container",children:(0,N.jsx)(d.s,{children:(0,N.jsx)("span",{className:"project-title",children:a.name})})}),style:{"--cui-card-cap-bg":"#1A4D55",cursor:"pointer"},values:[{title:"Trisemanales",value:a.trisemanal},{title:"Avance",value:a.progress}]})})},n)))),(0,N.jsx)(d.s,{children:(0,N.jsx)(r.U,{children:(0,N.jsx)(m.$,{onClick:()=>{A(!w)},className:"mb-3",icon:(0,N.jsx)(f.A,{className:"my-4 text-white",icon:"https://pgproject.cl/uploads/1705996608_a41c61e65ecf2a35c699.jpg",height:52}),chart:(0,N.jsx)(u.T,{className:"project-selector-container",children:(0,N.jsx)(d.s,{children:(0,N.jsx)("span",{className:"project-title",children:"Crear nuevo contrato"})})}),style:{"--cui-card-cap-bg":"#1A4D55",cursor:"pointer"}})})},0)]})})]})})]})}},25104:(e,a,t)=>{t.d(a,{V:()=>c});var n=t(22378),l=t(65043),r=t(65173),s=t.n(r),o=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.as,s=void 0===r?"div":r,c=e.className,i=(0,n.Tt)(e,["children","as","className"]);return l.createElement(s,(0,n.Cl)({className:(0,o.A)("card-header",c)},i,{ref:a}),t)}));c.propTypes={as:s().elementType,children:s().node,className:s().string},c.displayName="CCardHeader"},23682:(e,a,t)=>{t.d(a,{d:()=>c});var n=t(22378),l=t(65043),r=t(65173),s=t.n(r),o=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.as,s=void 0===r?"p":r,c=e.className,i=(0,n.Tt)(e,["children","as","className"]);return l.createElement(s,(0,n.Cl)({className:(0,o.A)("card-text",c)},i,{ref:a}),t)}));c.propTypes={as:s().elementType,children:s().node,className:s().string},c.displayName="CCardText"},64907:(e,a,t)=>{t.d(a,{Q:()=>c});var n=t(22378),l=t(65043),r=t(65173),s=t.n(r),o=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.as,s=void 0===r?"h5":r,c=e.className,i=(0,n.Tt)(e,["children","as","className"]);return l.createElement(s,(0,n.Cl)({className:(0,o.A)("card-title",c)},i,{ref:a}),t)}));c.propTypes={as:s().elementType,children:s().node,className:s().string},c.displayName="CCardTitle"},4398:(e,a,t)=>{t.d(a,{z:()=>y,m:()=>f});var n=t(22378),l=t(65043),r=t(65173),s=t.n(r),o=t(25196),c=t(46125),i=t(372),d=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.className,s=(0,n.Tt)(e,["children","className"]);return l.createElement("div",(0,n.Cl)({className:(0,o.A)("modal-content",r)},s,{ref:a}),t)}));d.propTypes={children:s().node,className:s().string},d.displayName="CModalContent";var m=(0,l.forwardRef)((function(e,a){var t,r=e.children,s=e.alignment,c=e.className,i=e.fullscreen,d=e.scrollable,m=e.size,u=(0,n.Tt)(e,["children","alignment","className","fullscreen","scrollable","size"]);return l.createElement("div",(0,n.Cl)({className:(0,o.A)("modal-dialog",(t={"modal-dialog-centered":"center"===s},t["boolean"===typeof i?"modal-fullscreen":"modal-fullscreen-".concat(i,"-down")]=i,t["modal-dialog-scrollable"]=d,t["modal-".concat(m)]=m,t),c)},u,{ref:a}),r)}));m.propTypes={alignment:s().oneOf(["top","center"]),children:s().node,className:s().string,fullscreen:s().oneOfType([s().bool,s().oneOf(["sm","md","lg","xl","xxl"])]),scrollable:s().bool,size:s().oneOf(["sm","lg","xl"])},m.displayName="CModalDialog";var u=t(94462),p=t(80413),f=(0,l.createContext)({}),y=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.alignment,s=e.backdrop,y=void 0===s||s,h=e.className,v=e.duration,b=void 0===v?150:v,N=e.focus,x=void 0===N||N,g=e.fullscreen,j=e.keyboard,T=void 0===j||j,C=e.onClose,E=e.onClosePrevented,w=e.onShow,A=e.portal,O=void 0===A||A,k=e.scrollable,R=e.size,L=e.transition,S=void 0===L||L,P=e.unmountOnClose,U=void 0===P||P,q=e.visible,D=(0,n.Tt)(e,["children","alignment","backdrop","className","duration","focus","fullscreen","keyboard","onClose","onClosePrevented","onShow","portal","scrollable","size","transition","unmountOnClose","visible"]),z=(0,l.useRef)(null),F=(0,l.useRef)(null),I=(0,l.useRef)(null),M=(0,u.E2)(a,F),_=(0,l.useState)(q),B=_[0],K=_[1],W=(0,l.useState)(!1),Q=W[0],V=W[1],Y={visible:B,setVisible:K};(0,l.useEffect)((function(){K(q)}),[q]),(0,l.useEffect)((function(){var e;return B?(z.current=document.activeElement,document.addEventListener("mouseup",$),document.addEventListener("keydown",G)):null===(e=z.current)||void 0===e||e.focus(),function(){document.removeEventListener("mouseup",$),document.removeEventListener("keydown",G)}}),[B]);var Z=function(){return"static"===y?V(!0):(K(!1),C&&C())};(0,l.useLayoutEffect)((function(){E&&E(),setTimeout((function(){return V(!1)}),b)}),[Q]),(0,l.useLayoutEffect)((function(){return B?(document.body.classList.add("modal-open"),y&&(document.body.style.overflow="hidden",document.body.style.paddingRight="0px"),setTimeout((function(){var e;x&&(null===(e=F.current)||void 0===e||e.focus())}),S?b:0)):(document.body.classList.remove("modal-open"),y&&(document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"))),function(){document.body.classList.remove("modal-open"),y&&(document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"))}}),[B]);var $=function(e){F.current&&F.current==e.target&&Z()},G=function(e){"Escape"===e.key&&T&&Z()};return l.createElement(l.Fragment,null,l.createElement(p.Ay,{in:B,mountOnEnter:!0,nodeRef:F,onEnter:w,onExit:C,unmountOnExit:U,timeout:S?b:0},(function(e){return l.createElement(i.Y,{portal:O},l.createElement(f.Provider,{value:Y},l.createElement("div",(0,n.Cl)({className:(0,o.A)("modal",{"modal-static":Q,fade:S,show:"entered"===e},h),tabIndex:-1},B?{"aria-modal":!0,role:"dialog"}:{"aria-hidden":"true"},{style:(0,n.Cl)({},"exited"!==e&&{display:"block"})},D,{ref:M}),l.createElement(m,{alignment:r,fullscreen:g,scrollable:k,size:R},l.createElement(d,{ref:I},t)))))})),y&&l.createElement(i.Y,{portal:O},l.createElement(c.W,{visible:B})))}));y.propTypes={alignment:s().oneOf(["top","center"]),backdrop:s().oneOfType([s().bool,s().oneOf(["static"])]),children:s().node,className:s().string,duration:s().number,focus:s().bool,fullscreen:s().oneOfType([s().bool,s().oneOf(["sm","md","lg","xl","xxl"])]),keyboard:s().bool,onClose:s().func,onClosePrevented:s().func,onShow:s().func,portal:s().bool,scrollable:s().bool,size:s().oneOf(["sm","lg","xl"]),transition:s().bool,unmountOnClose:s().bool,visible:s().bool},y.displayName="CModal"},16323:(e,a,t)=>{t.d(a,{T:()=>c});var n=t(22378),l=t(65043),r=t(65173),s=t.n(r),o=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.className,s=(0,n.Tt)(e,["children","className"]);return l.createElement("div",(0,n.Cl)({className:(0,o.A)("modal-body",r)},s,{ref:a}),t)}));c.propTypes={children:s().node,className:s().string},c.displayName="CModalBody"},85968:(e,a,t)=>{t.d(a,{I:()=>c});var n=t(22378),l=t(65043),r=t(65173),s=t.n(r),o=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.className,s=(0,n.Tt)(e,["children","className"]);return l.createElement("div",(0,n.Cl)({className:(0,o.A)("modal-footer",r)},s,{ref:a}),t)}));c.propTypes={children:s().node,className:s().string},c.displayName="CModalFooter"},11418:(e,a,t)=>{t.d(a,{E:()=>d});var n=t(22378),l=t(65043),r=t(65173),s=t.n(r),o=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.className,r=e.dark,s=e.disabled,c=e.white,i=(0,n.Tt)(e,["className","dark","disabled","white"]);return l.createElement("button",(0,n.Cl)({type:"button",className:(0,o.A)("btn","btn-close",{"btn-close-white":c},s,t),"aria-label":"Close",disabled:s},r&&{"data-coreui-theme":"dark"},i,{ref:a}))}));c.propTypes={className:s().string,dark:s().bool,disabled:s().bool,white:s().bool},c.displayName="CCloseButton";var i=t(4398),d=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.className,s=e.closeButton,d=void 0===s||s,m=(0,n.Tt)(e,["children","className","closeButton"]),u=(0,l.useContext)(i.m).setVisible;return l.createElement("div",(0,n.Cl)({className:(0,o.A)("modal-header",r)},m,{ref:a}),t,d&&l.createElement(c,{onClick:function(){return u(!1)}}))}));d.propTypes={children:s().node,className:s().string,closeButton:s().bool},d.displayName="CModalHeader"},89689:(e,a,t)=>{t.d(a,{l:()=>c});var n=t(22378),l=t(65043),r=t(65173),s=t.n(r),o=t(25196),c=(0,l.forwardRef)((function(e,a){var t=e.children,r=e.as,s=void 0===r?"h5":r,c=e.className,i=(0,n.Tt)(e,["children","as","className"]);return l.createElement(s,(0,n.Cl)({className:(0,o.A)("modal-title",c)},i,{ref:a}),t)}));c.propTypes={as:s().elementType,children:s().node,className:s().string},c.displayName="CModalTitle"},30529:(e,a,t)=>{t.d(a,{$:()=>p});var n=t(22378),l=t(65043),r=t(65173),s=t.n(r),o=t(25196),c=t(80861),i=t(96105),d=t(25104),m=t(44227),u=t(75232),p=(0,l.forwardRef)((function(e,a){var t,r=e.className,s=e.chart,u=e.color,p=e.icon,f=e.values,y=(0,n.Tt)(e,["className","chart","color","icon","values"]);return l.createElement(c.E,(0,n.Cl)({className:r},y,{ref:a}),l.createElement(d.V,{className:(0,o.A)("position-relative d-flex justify-content-center align-items-center",(t={},t["bg-".concat(u)]=u,t))},p,s),l.createElement(i.W,{className:"row text-center"},f&&f.map((function(e,a){return l.createElement(l.Fragment,{key:a},a%2!==0&&l.createElement("div",{className:"vr"}),l.createElement(m.U,null,l.createElement("div",{className:"fs-5 fw-semibold"},e.value),l.createElement("div",{className:"text-uppercase text-body-secondary small"},e.title)))}))))}));p.propTypes={chart:s().oneOfType([s().string,s().node]),className:s().string,color:u.TX,icon:s().oneOfType([s().string,s().node]),values:s().arrayOf(s().any)},p.displayName="CWidgetStatsD"}}]);
//# sourceMappingURL=728.0d2c7dfa.chunk.js.map